(function(k,b){var t=document;var f=t.head||t.getElementsByTagName("head")[0]||t.documentElement;var j=(function(u){return u[u.length-1]})(t.getElementsByTagName("script"));var c=j.getAttribute("data-main");var m=[];var g=m.slice;var n=m.forEach;var q={baseUrl:(function(w){var u=w.protocol+"//"+w.host+"/";var v;if(c){if(c.slice(0,u.length)===u){v=c}else{v=u+c}c=c.slice(c.lastIndexOf("/")+1)}else{v=u}return v.slice(0,v.lastIndexOf("/")+1)})(k.location),viewsPath:"views/",viewContext:t.body||t.getElementsByTagName("body")[0]||t.documentElement};var s={};function r(u){return typeof u==="string"?q[u]:p(q,u)}function a(y,w,u){var x=arguments.length;if(x===1){u=y;w=["require","exports","module"];y=null}else{if(x===2){if(q.toString.call(y)==="[object Array]"){u=w;w=y;y=null}else{u=w;w=["require","exports","module"]}}}if(!y){m.push([w,u]);return}function v(){var A,C,B;if(s[y]){A=s[y].handlers;C=s[y].context}B=s[y]=typeof u==="function"?u.apply(null,m.slice.call(arguments,0))||s[y]||{}:u;B.pilot=2;B.context=C;for(var z=0,D=A?A.length:0;z<D;z++){A[z](B)}}e(w,v,y)}a.amd={jQuery:true};function e(y,D,u){var B=[],w=0,z=false;if(typeof y==="string"){if(s[y]&&s[y].pilot===2){return s[y]}throw new Error(y+" has not been defined. Please include it as a dependency in "+u+"'s define()");return}for(var C=0,A=y.length;C<A;C++){switch(y[C]){case"require":var v=function(x,E){return e(x,E,u)};v.toUrl=function(x){return i(x,u)};B[C]=v;w++;break;case"exports":B[C]=s[u]||(s[u]={});w++;break;case"module":B[C]={id:u,uri:i(u)};w++;break;case s[u]?s[u].context:"":B[C]=s[s[u].context];w++;break;default:(function(E){d(y[E],function(x){B[E]=x;w++;w===A&&D&&(z=true,D.apply(null,B))},u)})(C)}}!z&&w===A&&D&&D.apply(null,B)}function d(v,w,u){v=u?i(v,u):v;if(s[v]){if(s[v].pilot===1){w&&s[v].handlers.push(w)}else{w&&w(s[v])}return}else{s[v]={pilot:1,handlers:[w],context:u}}h(i(v)+".js",function(){var x;if(x=m.shift()){x.unshift(v);s[v].pilot===1&&a.apply(null,x)}})}var i=e.toUrl=function(y,v){var x,u,w;switch(y){case"require":case"exports":case"module":return y}x=(v||q.baseUrl).split("/");x.pop();y=y.split("/");u=y.length;while(--u){switch(y[0]){case"..":x.pop();case".":case"":y.shift();w=true}}return(x.length&&w?x.join("/")+"/":"")+y.join("/")};function h(v,w){var u=t.createElement("script");u.onload=u.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){u.onload=u.onreadystatechange=null;f.removeChild(u);w&&w()}};u.type="text/javascript";u.async=true;u.src=v;f.appendChild(u)}function p(z,y){var w=g.call(arguments,1);var v=w.length;while(v-->-1){for(var u in w[v]){w[v].hasOwnProperty(u)&&(z[u]=w[v][u])}}return z}function l(u){return pilot.toString.call(u).slice(8,-1)}function o(u){return(u||"instance")+"_"+Date.now()+"."+(Math.floor(Math.random()*900000)+100000)}k.pilot={config:r,inject:h,define:k.define=a,require:k.require=e,exports:s,getType:l,extend:p,generateId:o};c&&e([c])})(window);define("pilot/model",[],function(){var f=pilot.extend;var c=JSON;var b=c.parse;var a=c.stringify;var d={};function e(){}e.prototype={init:function(h,g){if(typeof h==="string"){this.id=h;if(d[h]){this.synced=true;this.data=d[h]}else{this.synced=false;this.data=d[h]=g||{};this.sync()}}else{this.data=h||{}}return this},set:function(g,h){if(typeof g==="string"){this.data[g]=h}else{f(this.data,g)}this.sync();return this},get:function(i,h){var k,l,j;if(!i||typeof i!=="string"){return this.data}else{if(i.indexOf(".")===-1){return this.data[i]}}k=i.split("."),l=k[g],j=this.data;for(var g=0,m=k.length;g<m;l=k[++g]){j=j[l];if(typeof j==="undefined"){return h}}return j},remove:function(g){g&&typeof g==="string"?(delete this.data[g]):(this.data={});this.sync();return this},destroy:function(){this.data=null;this.sync()},sync:function(){var g;if(!this.id){return}else{if(this.synced){if(this.data){localStorage.setItem("data."+this.id,a(this.data));d[this.id]=this.data}else{localStorage.removeItem("data."+this.id);delete d[this.id]}}else{g=localStorage.getItem("data"+this.id);g?(this.data=d[this.id]=b(g)||{}):(this.data=d[this.data]={});this.synced=true}}}};return e});define("pilot/pubsub",[],function(){var a=Array.prototype.slice;var d={};var c=Date.now;function b(){}b.prototype={init:function(e){this.id=typeof e==="string"?e:pilot.generateId("pubsub");this.handlers={};return d[this.id]=this},on:function(i,h,f){f=typeof f==="undefined"?true:f;var g=this.handlers[i]||(this.handlers[i]=[]);g.push({handler:h,retain:f});return this},one:function(g,f){return this.on(g,f,false)},off:function(f){if(f&&typeof f==="string"){this.handlers[f]=[]}else{if(typeof f==="undefined"){this.handlers={}}}return this},trigger:function(h){var f,g,i;if((i=h.indexOf(".local"))!==-1){g=a.call(arguments,1);h=h.slice(0,i);f=this.handlers[h];if(f&&f.length){this.handlers[h]=f.filter(function(e){return e.handler.apply(null,g),e.retain})}}else{g=a.call(arguments,0);b.trigger.apply(null,g)}return this},destroy:function(f){d[this.id]=null}};b.trigger=function(){var e,f;e=a.call(arguments,0);e[0]=e[0]+".local";for(f in d){d.hasOwnProperty(f)&&d[f].trigger.apply(d[f],e)}};return b});define("pilot/view",["pilot/pubsub","pilot/model"],function(b,a){var e=Array.prototype.forEach;var c=[];function d(){}d.prototype={init:function(f,g){c.push(this);this.el=f;this.id=f.getAttribute("data-view")||"";this.params=g;this.events=new b().init(this.id);this.settings=new a().init(this.id);this.render();d.load(this.el,g);return this},render:function(){this.el.innerHTML=""},destroy:function(){this.events.destroy()}};d.load=function(g,h){g=g||"body";g=typeof g==="string"?doc.querySelector(g):g;h=typeof h==="object"?h:{};var f={};window.location.search.slice(1).split("&").forEach(function(j){var i=j.split("=");f[decodeURIComponent(i[0])]=decodeURIComponent(i.slice(1).join(""))});h=pilot.extend(f,h);e.call(g.getElementsByClassName("view"),function(i){var j=i.getAttribute("data-view")||"";j&&require([j.split(".")[0]],function(k){new k().init(i,h)})})};d.unload=function(f){f=f||"body";f=typeof f==="string"?doc.querySelector(f):f;c=c.filter(function(g){if(f.contains(g.el)){g.destroy();return false}return true})};return d});