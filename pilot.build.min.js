(function(k,c){var q=document;var g=q.head||q.getElementsByTagName("head")[0]||q.documentElement;var j=(function(s){return s[s.length-1]})(q.getElementsByTagName("script"));var d=j.getAttribute("data-main");var m=[];var n={baseUrl:(function(u){var s=u.protocol+"//"+u.host+"/";var t;if(d){if(d.slice(0,s.length)===s){t=d}else{t=s+d}d=d.slice(d.lastIndexOf("/")+1)}else{t=s}return t.slice(0,t.lastIndexOf("/")+1)})(k.location),viewsPath:"views/",viewContext:q.body||q.getElementsByTagName("body")[0]||q.documentElement};var p={};function o(s){return typeof s==="string"?n[s]:l(n,s)}function a(w,v,s){var u=arguments.length;if(u===1){s=w;v=["require","exports","module"];w=null}else{if(u===2){if(n.toString.call(w)==="[object Array]"){s=v;v=w;w=null}else{s=v;v=["require","exports","module"]}}}if(!w){m.push([v,s]);return}function t(){var z,B,A;if(p[w]){z=p[w].handlers;B=p[w].context}A=p[w]=typeof s==="function"?s.apply(null,m.slice.call(arguments,0))||p[w]||{}:s;A.pilot=2;A.context=B;for(var y=0,C=z?z.length:0;y<C;y++){z[y](A)}}f(v,t,w)}a.amd={jQuery:true};function f(u,A,s){var y=[],w=0,B=false;if(typeof u==="string"){if(p[u]&&p[u].pilot===2){return p[u]}throw new Error(u+" has not been defined. Please include it as a dependency in "+s+"'s define()");return}for(var z=0,v=u.length;z<v;z++){switch(u[z]){case"require":var t=function(x,C){return f(x,C,s)};t.toUrl=function(x){return i(x,s)};y[z]=t;w++;break;case"exports":y[z]=p[s]||(p[s]={});w++;break;case"module":y[z]={id:s,uri:i(s)};w++;break;case p[s]?p[s].context:"":y[z]=p[p[s].context];w++;break;default:(function(C){e(u[C],function(x){y[C]=x;w++;w===v&&A&&(B=true,A.apply(null,y))},s)})(z)}}!B&&w===v&&A&&A.apply(null,y)}function e(t,u,s){t=s?i(t,s):t;if(p[t]){if(p[t].pilot===1){u&&p[t].handlers.push(u)}else{u&&u(p[t])}return}else{p[t]={pilot:1,handlers:[u],context:s}}h(i(t)+".js",function(){var v;if(v=m.shift()){v.unshift(t);p[t].pilot===1&&a.apply(null,v)}})}var i=f.toUrl=function(w,t){var u,s,v;switch(w){case"require":case"exports":case"module":return w}u=(t||n.baseUrl).split("/");u.pop();w=w.split("/");s=w.length;while(--s){switch(w[0]){case"..":u.pop();case".":case"":w.shift();v=true}}return(u.length&&v?u.join("/")+"/":"")+w.join("/")};function h(t,u){var s=q.createElement("script");s.onload=s.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){s.onload=s.onreadystatechange=null;g.removeChild(s);u&&u()}};s.type="text/javascript";s.async=true;s.src=t;g.appendChild(s)}function l(u,t){for(var s in t){t.hasOwnProperty(s)&&(u[s]=t[s])}return u}function r(s){return pilot.toString.call(s).slice(8,-1)}function b(s){return(s||"instance")+"_"+Date.now()+"."+(Math.floor(Math.random()*900000)+100000)}k.pilot={config:o,inject:h,define:k.define=a,require:k.require=f,exports:p,get_type:r,extend:l,generate_id:b};d&&f([d])})(window);define("pilot/data",[],function(){var f=pilot.extend;var d=JSON;var c=d.parse;var a=d.stringify;var b={};function e(){}e.prototype={init:function(h,g){if(typeof h==="string"){this.id=h;if(b[h]){this.synced=true;this.data=b[h]}else{this.synced=false;this.data=b[h]=g||{};this.sync()}}else{this.data=h||{}}return this},set:function(g,h){if(typeof g==="string"){this.data[g]=h}else{f(this.data,g)}this.sync();return this},get:function(j,h){var l,k,i;if(!j||typeof j!=="string"){return this.data}else{if(j.indexOf(".")===-1){return this.data[j]}}l=j.split("."),k=l[g],i=this.data;for(var g=0,m=l.length;g<m;k=l[++g]){i=i[k];if(typeof i==="undefined"){return h}}return i},remove:function(g){g&&typeof g==="string"?(delete this.data[g]):(this.data={});this.sync();return this},destroy:function(){this.data=null;this.sync()},sync:function(){var g;if(!this.id){return}else{if(this.synced){if(this.data){localStorage.setItem("data."+this.id,a(this.data));b[this.id]=this.data}else{localStorage.removeItem("data."+this.id);delete b[this.id]}}else{g=localStorage.getItem("data"+this.id);g?(this.data=b[this.id]=c(g)||{}):(this.data=b[this.data]={});this.synced=true}}}};return e});define("pilot/pubsub",[],function(){var d=Array.prototype.slice;var c={};var b=Date.now;function a(){}a.prototype={init:function(e){this.id=typeof e==="string"?e:pilot.generate_id("pubsub");this.handlers={};return c[this.id]=this},on:function(i,h,f){f=typeof f==="undefined"?true:f;var g=this.handlers[i]||(this.handlers[i]=[]);g.push({handler:h,retain:f});return this},one:function(g,f){return this.on(g,f,false)},off:function(f){if(f&&typeof f==="string"){this.handlers[f]=[]}else{if(typeof f==="undefined"){this.handlers={}}}return this},trigger:function(i){var f,g,h;if((h=i.indexOf(".local"))!==-1){g=d.call(arguments,1);i=i.slice(0,h);f=this.handlers[i];if(f&&f.length){this.handlers[i]=f.filter(function(e){return e.handler.apply(null,g),e.retain})}}else{g=d.call(arguments,0);a.trigger.apply(null,g)}return this},destroy:function(f){c[this.id]=null}};a.trigger=function(){var e,f;e=d.call(arguments,0);e[0]=e[0]+".local";for(f in c){c.hasOwnProperty(f)&&c[f].trigger.apply(c[f],e)}};return a});define("pilot/router",["pilot/pubsub"],function(g){var b=window;var e=b.location;var h=e.protocol+"//"+e.host+"/";var d=h.length;var f=b.history;var c=pilot.get_type;var i=[];var a={uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,query_parser:/(?:^|&)([^&=]*)=?([^&]*)/g,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"]};var k=new g;if(f&&f.pushState){b.onpopstate=function(){j.run(e.href)};document.addEventListener("click",function(n){var m=n.target;var l=m.href;var o;if(l&&l.indexOf("#")!==0&&l.slice(0,d)===h){o=m.getAttribute("data-bypass");if((o&&o==="true")||n.defaultPrevented||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey){return}n.preventDefault();j.run(l);f.pushState(j.parse(l),null,l)}})}var j={add:function(l){if(c(l)==="Array"){i.push.apply(i,l)}else{i.push(l)}return j},get:function(m){var n=j.parse(m);var l=i.filter(function(p){return p.route&&p.route.test(n.path)})[0];var o;if(l){l.params=n.params;o=n.path.match(l.route).slice(1);if(o&&o.length&&l.matches.length){o.forEach(function(p){l.params[l.matches[p]]=decodeURIComponent(o[p])})}}return l},run:function(m){var l=j.get(m);if(l){k.trigger("unload",l.params);l.callback(l.params);k.trigger("load",l.params)}return j},parse:function(p){var n=a.key;var o=a.uri_parser.exec(p);var m={params:{}};var l=14;while(l--){m[n[l]]=o[l]||""}m[n[12]].replace(a.query_parser,function(r,q,s){q&&(m.params[q]=decodeURIComponent(s))});return m}};return j});define("pilot/view",["pilot/pubsub","pilot/data"],function(b,d){var c=Array.prototype.forEach;function a(){}a.prototype={init:function(e,f){this.el=e;this.id=e.getAttribute("data-view")||"";this.id=this.id.indexOf("!")!==-1?this.id.split("!")[0]:this.id;this.params=f;this.events=new b().init(this.id);this.data=new d().init(this.id);this.app_events();this.dom_events();this.render();return this},app_events:function(){},dom_events:function(){},render:function(){this.el.innerHTML=this.generate();this.init_subviews()},generate:function(){return""},init_subviews:function(f){var e=this;c.call(e.el.getElementsByClassName("view"),function(g){var h=g.getAttribute("data-view")||"";if(h){h=h.indexOf("!")!==-1?h.split("!")[1]:h;require([h],function(i){new i().init(g,e.params)})}})},destroy:function(){this.events.destroy()}};return a});
