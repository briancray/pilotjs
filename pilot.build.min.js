(function(l,d){var u=document;var h=u.head||u.getElementsByTagName("head")[0]||u.documentElement;var k=(function(v){return v[v.length-1]})(u.getElementsByTagName("script"));var e=k.getAttribute("data-main");var n=[];var s=n.slice;var b=n.forEach;var o={baseUrl:(function(x){var v=x.protocol+"//"+x.host+"/";var w;if(e){if(e.slice(0,v.length)===v){w=e}else{w=v+e}e=e.slice(e.lastIndexOf("/")+1)}else{w=v}return w.slice(0,w.lastIndexOf("/")+1)})(l.location),viewsPath:"views/",viewContext:u.body||u.getElementsByTagName("body")[0]||u.documentElement};var r={};function p(v){return typeof v==="string"?o[v]:m(o,v)}function a(z,y,v){var x=arguments.length;if(x===1){v=z;y=["require","exports","module"];z=null}else{if(x===2){if(o.toString.call(z)==="[object Array]"){v=y;y=z;z=null}else{v=y;y=["require","exports","module"]}}}if(!z){n.push([y,v]);return}function w(){var B,D,C;if(r[z]){B=r[z].handlers;D=r[z].context}C=r[z]=typeof v==="function"?v.apply(null,n.slice.call(arguments,0))||r[z]||{}:v;C.pilot=2;C.context=D;for(var A=0,E=B?B.length:0;A<E;A++){B[A](C)}}g(y,w,z)}a.amd={jQuery:true};function g(y,D,v){var B=[],A=0,E=false;if(typeof y==="string"){if(r[y]&&r[y].pilot===2){return r[y]}throw new Error(y+" has not been defined. Please include it as a dependency in "+v+"'s define()");return}for(var C=0,z=y.length;C<z;C++){switch(y[C]){case"require":var w=function(x,F){return g(x,F,v)};w.toUrl=function(x){return j(x,v)};B[C]=w;A++;break;case"exports":B[C]=r[v]||(r[v]={});A++;break;case"module":B[C]={id:v,uri:j(v)};A++;break;case r[v]?r[v].context:"":B[C]=r[r[v].context];A++;break;default:(function(F){f(y[F],function(x){B[F]=x;A++;A===z&&D&&(E=true,D.apply(null,B))},v)})(C)}}!E&&A===z&&D&&D.apply(null,B)}function f(w,x,v){w=v?j(w,v):w;if(r[w]){if(r[w].pilot===1){x&&r[w].handlers.push(x)}else{x&&x(r[w])}return}else{r[w]={pilot:1,handlers:[x],context:v}}i(j(w)+".js",function(){var y;if(y=n.shift()){y.unshift(w);r[w].pilot===1&&a.apply(null,y)}})}var j=g.toUrl=function(z,w){var x,v,y;switch(z){case"require":case"exports":case"module":return z}x=(w||o.baseUrl).split("/");x.pop();z=z.split("/");v=z.length;while(--v){switch(z[0]){case"..":x.pop();case".":case"":z.shift();y=true}}return(x.length&&y?x.join("/")+"/":"")+z.join("/")};function i(w,x){var v=u.createElement("script");v.onload=v.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){v.onload=v.onreadystatechange=null;h.removeChild(v);x&&x()}};v.type="text/javascript";v.async=true;v.src=w;h.appendChild(v)}function m(A,z){var y=s.call(arguments,1);var w=y.length;while(w-->-1){for(var v in y[w]){y[w].hasOwnProperty(v)&&(A[v]=y[w][v])}}return A}function t(w){return pilot.toString.call(w).slice(8,-1)}function c(v){return(v||"instance")+"_"+Date.now()+"."+(Math.floor(Math.random()*900000)+100000)}function q(v,w){v=typeof v==="string"?u.querySelector(v):v;b.call(v.getElementsByClassName("view"),function(x){var y=x.getAttribute("data-view")||"";y&&g([y.split(".")[0]],function(z){new z().init(x,w)})})}l.pilot={config:p,inject:i,define:l.define=a,require:l.require=g,exports:r,get_type:t,extend:m,generate_id:c,render:q};e&&g([e])})(window);define("pilot/model",[],function(){var f=pilot.extend;var e=JSON;var c=e.parse;var a=e.stringify;var b={};function d(){}d.prototype={init:function(h,g){if(typeof h==="string"){this.id=h;if(b[h]){this.synced=true;this.data=b[h]}else{this.synced=false;this.data=b[h]=g||{};this.sync()}}else{this.data=h||{}}return this},set:function(g,h){if(typeof g==="string"){this.data[g]=h}else{f(this.data,g)}this.sync();return this},get:function(j,h){var l,k,i;if(!j||typeof j!=="string"){return this.data}else{if(j.indexOf(".")===-1){return this.data[j]}}l=j.split("."),k=l[g],i=this.data;for(var g=0,m=l.length;g<m;k=l[++g]){i=i[k];if(typeof i==="undefined"){return h}}return i},remove:function(g){g&&typeof g==="string"?(delete this.data[g]):(this.data={});this.sync();return this},destroy:function(){this.data=null;this.sync()},sync:function(){var g;if(!this.id){return}else{if(this.synced){if(this.data){localStorage.setItem("data."+this.id,a(this.data));b[this.id]=this.data}else{localStorage.removeItem("data."+this.id);delete b[this.id]}}else{g=localStorage.getItem("data"+this.id);g?(this.data=b[this.id]=c(g)||{}):(this.data=b[this.data]={});this.synced=true}}}};return d});define("pilot/pubsub",[],function(){var d=Array.prototype.slice;var c={};var b=Date.now;function a(){}a.prototype={init:function(e){this.id=typeof e==="string"?e:pilot.generate_id("pubsub");this.handlers={};return c[this.id]=this},on:function(i,h,f){f=typeof f==="undefined"?true:f;var g=this.handlers[i]||(this.handlers[i]=[]);g.push({handler:h,retain:f});return this},one:function(g,f){return this.on(g,f,false)},off:function(f){if(f&&typeof f==="string"){this.handlers[f]=[]}else{if(typeof f==="undefined"){this.handlers={}}}return this},trigger:function(i){var f,g,h;if((h=i.indexOf(".local"))!==-1){g=d.call(arguments,1);i=i.slice(0,h);f=this.handlers[i];if(f&&f.length){this.handlers[i]=f.filter(function(e){return e.handler.apply(null,g),e.retain})}}else{g=d.call(arguments,0);a.trigger.apply(null,g)}return this},destroy:function(f){c[this.id]=null}};a.trigger=function(){var e,f;e=d.call(arguments,0);e[0]=e[0]+".local";for(f in c){c.hasOwnProperty(f)&&c[f].trigger.apply(c[f],e)}};return a});define("pilot/view",["pilot/pubsub","pilot/model"],function(c,b){var d=Array.prototype.forEach;function a(){}a.prototype={init:function(e,f){this.el=e;this.id=e.getAttribute("data-view")||"";this.params=f;this.events=new c().init(this.id);this.model=new b().init(this.id);this.app_events();this.dom_events();this.render();return this},app_events:function(){},dom_events:function(){},render:function(){this.el.innerHTML=this.generate();this.init_subviews()},generate:function(){return""},init_subviews:function(f){var e=this;pilot.render(e.el,e.params)},destroy:function(){this.events.destroy()}};return a});
