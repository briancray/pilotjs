(function(b,a,d){var c=a.Promise=function(){if(this instanceof c){this.handlers={success:[],error:[],progress:[]};return this}return new c()};c.prototype={status:"unfulfilled",then:function(g,f,e){!!g&&this.add("success",g);!!f&&this.add("error",f);!!e&&this.add("progress",fulfilled);switch(this.status){case"fulfilled":this.success();break;case"failed":this.error();break}return this},success:function(){this.status="fulfilled";this.handlers.success.forEach(function(e){e.apply(null,arguments)});return this.clear()},error:function(){this.status="failed";this.handlers.error.forEach(function(e){e.apply(null,arguments)});return this.clear()},progress:function(){this.handlers.progress.forEach(function(e){e.apply(null,arguments)});return this},add:function(e,f){switch(a.utils.get_type(f)){case"function":this.handlers[e].push(f);break;case"array":this.handlers[e].concat(f)}return this},clear:function(){this.handlers={success:[],error:[],progress:[]};return this}}})(window,Pilot);(function(c,a,f){var e=c.JSON,b={}.toString,d=[].slice;a.utils={get_type:function(g){return b.call(g).replace("[object ","").slice(0,-1).toLowerCase()},format_date:function(h,g){},format_date_relative:function(k){k=k instanceof Date?k:new Date(k);var l=~~((Date.now()-k.getTime())/1000),j=60,g=j*60,h=g*24,i=h*7;return l<30?"Just now":l<j?l+" seconds ago":l<2*j?"A minute ago":l<g?l+" minutes ago":l<g*2?"An hour ago":l<h?l+" hours ago":l<h*2?"Yesterday":a.utils.format_date(k)},trim_number:function(o,h){o=+o;var g=Math.floor((o.length-1)/3),j=o.length-g*3,l=o.slice(0,j),k=h?o.slice(j,j+h):"",i=["","k","m","b","t"][g],m=l+(k.length?"."+k:"")+i;return i.length?m:""+o},trim_string:function(h,g){g=g||60;if(g>=str.length){return str}g=str.indexOf(" ",g);return str.slice(0,g)+"&hellip;"},trim_url:function(j,i){str=str.replace(/^https?:\/\/(?:www\.)?/,"");i=i||60;if(i>=str.length){return str}var h=[],k=str.indexOf("/"),g=["",""];while(k>0){h.push(k);k=str.indexOf("/",k+1)}if(str.charAt(str.length-1)=="/"){h.pop()}if(h.length<=1){return str}g[1]=str.slice(h.pop());g[0]=str.slice(0,h.pop()+1);while(g.join("").length>i&&h.length>1){g[0]=str.slice(0,h.pop()+1)}return g.join("&hellip;")},format_number:function(g){g=+g;return g!=g?"0":(""+Math.round(g)).split("").reverse().join("").match(/.{1,3}/g).join().split("").reverse().join("")},hash:function(j){for(var i=0,g=0,k=j.length;g<k;g++){i=(i<<5)-i+j.charCodeAt(g);i&=i}return i},decode_entities:function(g){return g.replace(/&#(\d+);?/g,function(h,i){return String.fromCharCode(i)})},encode_entities:function(g){return g.replace(/(\W)/g,function(k,j,h){return"&#"+g.charCodeAt(h)+";"})},extend:function(h,i){for(var g in i){i.hasOwnProperty(g)&&(h[g]=i[g])}return h},toJSON:function(g){return e.stringify(g)},fromJSON:function(g){return e.parse(g)},memoize:function(h,g){return function(){var j=d.call(arguments),l="",i=j.length,k=null;h.memoize=g||h.memoize||{};while(i--){k=j[i];l=l+(k===Object(k))?e.stringify(k):k}return(h.memoize.hasOwnProperty(l))?h.memoize[l]:h.memoize[l]=h.apply(this,j)}}}})(window,Pilot);(function(d,b,e){var a={synced:false,data:{},instances:{}};var c=b.Data=function(g,f){if(this instanceof c){this.is_private=f;this.data=!f?(a.data[g]=a.data[g]||{}):{};this.id=g;return this}return a.instances[g]||(a.instances[g]=new c(g))};c.prototype={set:function(g,f){switch(b.utils.get_type(g)){case"string":this.data[g]=f;break;case"object":b.utils.extend(this.data[x],g[x]);break}!this.is_private&&c.sync()},get:function(f){return f?this.data[f]:this.data},remove:function(f){f?(delete this.data[f],delete a.data[this.id][f]):(this.data=a.data[this.id]={});!this.is_private&&c.sync()},destroy:function(){if(!this.is_private){delete a.data[this.id];c.sync()}delete a.instances[this.id]}};c.sync=function(){if(!a.synced){var f=localStorage.getItem("data");f?(a.data=b.utils.fromJSON(f)||{}):(a.data={});a.synced=true}else{localStorage.setItem("data",b.utils.toJSON(a.data))}};c.sync()})(window,Pilot);(function(d,b,e){var a={handlers:{},instances:{}};var c=b.Pubsub=function(f){if(this instanceof c){this.id=f;this.handlers=a.handlers[f]=a.handlers[f]||{};return this}return a.instances[f]||(a.instances[f]=new c(f))};c.prototype={on:function(g,f){g&&f&&(this.handlers[g]=this.handlers[g]||[]).push({handler:f,retain:true})},one:function(g,f){g&&f&&(this.handlers[g]=this.handlers[g]||[]).push({handler:f,retain:false})},off:function(f){f?(delete this.handlers[f],delete a.handlers[this.id][f]):(this.handlers=a.handlers[this.id]={})},trigger:function(g,f){if(f&&this.handlers[g]){this.handlers[g]=this.handlers[g].filter(function(i){return i.handler(),i.retain});!this.handlers[g].length&&delete this.handlers[g]}else{if(!f){c.trigger(g)}}},destroy:function(){delete a.handlers[this.id];delete a.instances[this.id]}};c.trigger=function(h){var g=a.instances;for(var f in g){g.hasOwnProperty(f)&&g[f].trigger(h,true)}}})(window,Pilot);(function(d,c,e){var a={loaded:{},loading:{},instances:{}};var b=c.Component=function(h){var g=h.split(".")[0],f=a.loaded[g];if(this instanceof b){return this}else{if(!f){!a.loading[g]&&c.inject("components/"+g+".js").then(function(){b(h).ready(a.loading[g].command_queue);delete a.loading[g]});return a.loading[g]||(a.loading[g]=new b(h))}}return a.instances[h]||(a.instances[h]=new f(h))};b.prototype={queue:function(f){if(this.method){this.method.apply(this,Array.prototype.slice.call(arguments,1))}else{(this.command_queue||(this.command_queue=[])).push(Array.prototype.slice.call(arguments,0))}},ready:function(f){var g=this;f&&f.forEach(function(h){g[h[0]]&&g[h[0]].apply(g,h.slice(1))})},get_element:function(){var f=this,g=document.getElementsByClassName("component");return Array.prototype.filter.call(g,function(h){return h.getAttribute("data-component")===f.id})[0]},destroy:function(){this.events.destroy();delete a.instances[this.id]}};b.define=function(g,h){var f=a.loaded[g]=function(i){this.id=i;this.element=this.get_element();this.events=c.Pubsub(i);this.data=c.Data(i);return this};f.prototype=c.utils.extend(h(),b.prototype)};b.render=function(){var h=document.getElementsByClassName("component"),g={},f=a.instances;Array.prototype.forEach.call(h,function(j){var k=j.getAttribute("data-component");g[k]=b(k)});for(var i in f){if(!g[i]){f[i].unload&&f[i].unload();f[i].destroy()}}c.Pubsub.trigger("refresh");for(var i in g){g[i].queue("load")}};b.render()})(window,Pilot);(function(b,a,d){var c=a.Model=function(h){var f=h.split(".")[0],g=cache.models,e=g.loaded[f];if(this instanceof c){return this}else{if(!e){a.Script.inject("modules/"+f+".js").then(function(){var i=c(h);i.load&&i.load()});return g.loaded[f]=new c(h)}}return modules.instances[h]||(modules.instances[h]=new e(h))};c.prototype={get:function(e){return this.data.get(e)},set:function(f,e){this.data.set(f,e)},remove:function(e){this.data.remove(e)}};c.define=function(f,g){var e=cache.model.loaded[f]=function(h){this.id=h;this.events=a.Pubsub(h);this.data=a.Data(h);return this};e.prototype=a.utils.extend(g(),c.prototype)}})(window,Pilot);