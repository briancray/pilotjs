(function(c,a,f){var e=c.JSON,b={}.toString,d=[].slice;a.utils={get_type:function(g){return b.call(g).replace("[object ","").slice(0,-1).toLowerCase()},format_date:function(h,g){},format_date_relative:function(k){k=k instanceof Date?k:new Date(k);var l=~~((Date.now()-k.getTime())/1000),j=60,g=j*60,h=g*24,i=h*7;return l<30?"Just now":l<j?l+" seconds ago":l<2*j?"A minute ago":l<g?l+" minutes ago":l<g*2?"An hour ago":l<h?l+" hours ago":l<h*2?"Yesterday":a.utils.format_date(k)},trim_number:function(o,h){o=+o;var g=Math.floor((o.length-1)/3),j=o.length-g*3,l=o.slice(0,j),k=h?o.slice(j,j+h):"",i=["","k","m","b","t"][g],m=l+(k.length?"."+k:"")+i;return i.length?m:""+o},trim_string:function(h,g){g=g||60;if(g>=str.length){return str}g=str.indexOf(" ",g);return str.slice(0,g)+"&hellip;"},trim_url:function(j,i){str=str.replace(/^https?:\/\/(?:www\.)?/,"");i=i||60;if(i>=str.length){return str}var h=[],k=str.indexOf("/"),g=["",""];while(k>0){h.push(k);k=str.indexOf("/",k+1)}if(str.charAt(str.length-1)=="/"){h.pop()}if(h.length<=1){return str}g[1]=str.slice(h.pop());g[0]=str.slice(0,h.pop()+1);while(g.join("").length>i&&h.length>1){g[0]=str.slice(0,h.pop()+1)}return g.join("&hellip;")},format_number:function(g){g=+g;return g!=g?"0":(""+Math.round(g)).split("").reverse().join("").match(/.{1,3}/g).join().split("").reverse().join("")},hash:function(j){for(var i=0,g=0,k=j.length;g<k;g++){i=(i<<5)-i+j.charCodeAt(g);i&=i}return i},decode_entities:function(g){return g.replace(/&#(\d+);?/g,function(h,i){return String.fromCharCode(i)})},encode_entities:function(g){return g.replace(/(\W)/g,function(k,j,h){return"&#"+g.charCodeAt(h)+";"})},extend:function(h,i){for(var g in i){i.hasOwnProperty(g)&&(h[g]=i[g])}return h},toJSON:function(g){return e.stringify(g)},fromJSON:function(g){return e.parse(g)},memoize:function(h,g){return function(){var j=d.call(arguments),l="",i=j.length,k=null;h.memoize=g||h.memoize||{};while(i--){k=j[i];l=l+(k===Object(k))?e.stringify(k):k}return(h.memoize.hasOwnProperty(l))?h.memoize[l]:h.memoize[l]=h.apply(this,j)}},capitalize:function(g){return g.slice(0,1).toUpperCase()+g.slice(1).toLowerCase()}}})(window,Pilot);(function(d,c,b){var h=c.utils,e=h.extend,i=h.fromJSON,g=h.toJSON,a=h.get_type;var f=c.Data=c.extend({name:"Data",init:function(k,j){this.global=j||false;this.synced=false;this.sync()},set:function(j,k){switch(a(j)){case"string":this.data[j]=k;break;case"object":e(this.data,j);break}this.sync()},get:function(m,k){if(!m||m.indexOf(".")===-1){return m?this.data[m]:this.data}var o=o.split("."),j=0,p=o.length,n=o[j],l=this.data;for(;j<p;n=o[++j]){l=l[n];if(!l){return k}}return l},remove:function(j){j?(delete this.data[j]):(this.data={});this.sync()},destroy:function(){delete f.instances[this.id]},sync:function(){if(!this.global){return}else{if(this.synced){localStorage.setItem("data"+this.id,g(this.data));f.data[this.id]=this.data}else{var j=localStorage.getItem("data"+this.id);j?(this.data=f.data[this.id]=i(j)||{}):(this.data=f.data[this.data]={});this.synced=true}}}});f.data={}})(window,Pilot);(function(e,c,g){var a=[],f=a.slice,b=c.utils.get_type;var d=c.Pubsub=c.extend({init:function(){this.handlers=d.handlers[this.id]=d.handlers[this.id]||{}},on:function(j,i){j&&i&&(this.handlers[j]=this.handlers[j]||[]).push({handler:i,retain:true})},one:function(j,i){j&&i&&(this.handlers[j]=this.handlers[j]||[]).push({handler:i,retain:false})},off:function(h){h?(delete this.handlers[h]):(this.handlers=d.handlers[this.id]={})},trigger:function(i){var h=f.call(arguments,1);this.handlers[i]=(this.handlers[i]||[]).filter(function(j){return j.handler.apply(null,h),j.retain})},destroy:function(){delete d.handlers[this.id];delete d.instances[this.id]}});d.handlers={};d.trigger=function(j){var i=d.instances;for(var h in i){i.hasOwnProperty(h)&&i[h].trigger.apply(i[h],arguments)}}})(window,Pilot);(function(c,a,e){var d=[].slice,f=a.utils.extend;var b=a.Widget=a.extend({init:function(){this.element=this.get_element();this.events=a.Pubsub(".module."+this.id,true);this.data=a.Data(".module."+this.id,true)},queue:function(g){if(typeof this.method==="function"){this.method.apply(this,d.call(arguments,1))}else{(this.command_queue||(this.command_queue=[])).push(d.call(arguments))}},get_element:function(){var h=this,g=document.getElementsByClassName("widget");return Array.prototype.filter.call(g,function(i){return i.getAttribute("data-widget")===h.id})[0]},destroy:function(){this.events.destroy();delete b.instances[this.id]}});b.type="widget";b.render=function(){var h=d.call(document.getElementsByClassName("widget")),g={},i=b.instances;h.forEach(function(k){var l=k.getAttribute("data-widget");g[l]=b(l)});for(var j in i){if(!g[j]){i[j].unload&&i[j].unload();i[j].destroy()}}a.Pubsub.trigger("refresh")}})(window,Pilot);